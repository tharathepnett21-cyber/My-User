<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-6">
  <div class="max-w-3xl mx-auto">
    <h1 class="text-2xl font-bold mb-4">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>

    <div class="mb-3">
      <input id="q" class="w-full border rounded-lg p-2" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå..." />
    </div>

    <div class="bg-white rounded-xl shadow overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead class="bg-gray-100 text-gray-700">
          <tr>
            <th class="p-3 text-left">‡πÄ‡∏ß‡∏•‡∏≤</th>
            <th class="p-3 text-left">‡∏ä‡∏∑‡πà‡∏≠</th>
            <th class="p-3 text-left">‡πÄ‡∏ö‡∏≠‡∏£‡πå</th>
          </tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>
    </div>
  </div>

  <script>
    // üëâ ‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå Apps Script ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ user
    const API_URL = "PASTE_YOUR_APPS_SCRIPT_URL_HERE";

    async function load() {
      const res = await fetch(API_URL);
      const list = await res.json(); // [{timestamp,name,phone},...]
      window._raw = list;
      render();
    }

    function render(){
      const q = (document.getElementById('q').value || '').trim().toLowerCase();
      const rows = document.getElementById('rows');
      const fmt = d => { try { return new Date(d).toLocaleString(); } catch { return d; } };
      rows.innerHTML = (window._raw || [])
        .filter(x => !q || (String(x.name).toLowerCase().includes(q) || String(x.phone).includes(q)))
        .reverse()
        .map(x => `
          <tr class="border-b last:border-0">
            <td class="p-3 text-gray-600">${fmt(x.timestamp)}</td>
            <td class="p-3">${x.name || '-'}</td>
            <td class="p-3">${x.phone || '-'}</td>
          </tr>
        `).join('');
    }

    document.getElementById('q').addEventListener('input', render);
    load();
  </script>
</body>
</html>
